{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///delegated ./node_modules/three/build/three.module.js from dll-reference vendor_78d002047907e32b5251","webpack:///external \"vendor_78d002047907e32b5251\"","webpack:///./node_modules/stats-js/build/stats.min.js","webpack:///delegated ./node_modules/three-orbitcontrols/OrbitControls.js from dll-reference vendor_78d002047907e32b5251","webpack:///./test/initScene.js","webpack:///./test/Maze.js","webpack:///./test/keyboard.js","webpack:///./test/text2D.js","webpack:///./test/Car.js","webpack:///./test/HUD.js","webpack:///./test/main.js","webpack:///./test/NPC.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","vendor_78d002047907e32b5251","document","createElement","e","appendChild","dom","children","length","style","display","cssText","addEventListener","preventDefault","performance","Date","now","a","f","Panel","self","memory","REVISION","addPanel","showPanel","begin","end","update","usedJSHeapSize","jsHeapSizeLimit","this","domElement","setMode","Math","round","window","devicePixelRatio","u","h","y","width","height","v","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","min","max","drawImage","scene","Maze","thickness","wallHeight","_classCallCheck","row","col","wall","graph","initMaze","initData","loader","THREE","crossOrigin","textureOutX","load","textureOutY","textureOutZ","textureInZ","textureInY","wrapS","wrapT","repeat","set","matArrayOut","push","map","matArrayIn","topWall","bottomWall","leftWall","rightWall","rotation","PI","position","add","temp","Array","fill","wallclone","x","z","left","right","mazeData","isRow","frontPoint","nextPoint","indexOf","top","bottom","forEach","traverse","castShadow","receiveShadow","sets","walls","j","choose","floor","random","b","Union_set","pop","find","data","splice","pushInGraph","console","log","KeyboardState","onKeyDown","onKeyUp","k","8","9","13","16","17","18","27","32","33","34","35","36","37","38","39","40","45","46","186","187","188","189","190","191","219","220","221","222","status","keyName","keyCode","String","fromCharCode","event","pressed","down","up","updatedPreviously","debug","list","arg","THREE_Text","id","loaded","SpriteText2D","MeshText2D","textAlign","__extends","constructor","apply","arguments","raycast","sprite","updateText","canvas","drawText","_text","_font","_fillStyle","cleanUp","texture","Texture","needsUpdate","applyAntiAlias","material","SpriteMaterial","Sprite","geometry","scale","textWidth","align","textHeight","Text2D","CanvasText","center","side","DoubleSide","antialias","text","configurable","dispose","magFilter","NearestFilter","minFilter","LinearMipMapLinearFilter","Object3D","Vector2","topLeft","topRight","bottomLeft","bottomRight","getFontHeight","getElementsByTagName","createTextNode","setAttribute","offsetHeight","removeChild","ctx","clearRect","ceil","measureText","ceilPowerOfTwo","mesh","MeshBasicMaterial","transparent","PlaneGeometry","Mesh","vertices","verticesNeedUpdate","Car","maze","bodycolor","textName","undefined","startCell","camera","Car_classCallCheck","nowCell","body","buildBody","rot","speed","lookAt","clone","sub","copy","getNodeToPos","color","dt","keyboard","vel","applyAxisAngle","nextPos","multiplyScalar","checkNextPos","mazeWidth","mazeDepth","dir","nextCell","check","HUD","target","mazeTotalWidth","HUD_classCallCheck","initHUD","sceneHUD","cameraHUD1","cameraHUD2","lineGeo","line","renderer","clock","hud","car","npc","npc2","npc3","npc4","light","NPC","_this","traversMode","NPC_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","NPCStateTable","freeze","initState","findNextPoint","GoToPoint","NPCState","isTraverse","targetNode","stackPath","frontNode","traversModeTable","Astar_Manhattan","Astar_Euclidean","AstarPath","node","normalize","acos","shitDis","colorString","openList","closeList","sumNode","NodeName","NodeValue","Parent","pos","getElementById","innerHTML","dis","ref","abs","drawColor","shit","res","initAstarPath_Manhattan","initAstarPath_Euclidean","findNextPoint_Left","findNextPoint_Right","findNextPoint_Astar","stats","Stats","raycaster","mouse","pickables","mazeSize","cameraFar","innerWidth","innerHeight","aspect","updateProjectionMatrix","setSize","clientX","clientY","setFromCamera","intersects","intersectObjects","remove","removeWall","zIndex","setClearColor","autoClear","plane","xhr","background","fog","shadow","mapSize","near","far","bias","start_node","queue","sum","shift","BFS_TEST","init","animate","getDelta","requestAnimationFrame","WW","HH","setScissorTest","setViewport","setScissor","clear","render"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = (__webpack_require__(1))(0);","module.exports = vendor_78d002047907e32b5251;","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.Stats=t()}(this,function(){\"use strict\";var c=function(){var n=0,l=document.createElement(\"div\");function e(e){return l.appendChild(e.dom),e}function t(e){for(var t=0;t<l.children.length;t++)l.children[t].style.display=t===e?\"block\":\"none\";n=e}l.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\",l.addEventListener(\"click\",function(e){e.preventDefault(),t(++n%l.children.length)},!1);var i=(performance||Date).now(),a=i,o=0,f=e(new c.Panel(\"FPS\",\"#0ff\",\"#002\")),r=e(new c.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var d=e(new c.Panel(\"MB\",\"#f08\",\"#201\"));return t(0),{REVISION:16,dom:l,addPanel:e,showPanel:t,begin:function(){i=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(r.update(e-i,200),a+1e3<=e&&(f.update(1e3*o/(e-a),100),a=e,o=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){i=this.end()},domElement:l,setMode:t}};return c.Panel=function(n,l,i){var a=1/0,o=0,f=Math.round,r=f(window.devicePixelRatio||1),d=80*r,e=48*r,c=3*r,p=2*r,u=3*r,s=15*r,m=74*r,h=30*r,y=document.createElement(\"canvas\");y.width=d,y.height=e,y.style.cssText=\"width:80px;height:48px\";var v=y.getContext(\"2d\");return v.font=\"bold \"+9*r+\"px Helvetica,Arial,sans-serif\",v.textBaseline=\"top\",v.fillStyle=i,v.fillRect(0,0,d,e),v.fillStyle=l,v.fillText(n,c,p),v.fillRect(u,s,m,h),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(u,s,m,h),{dom:y,update:function(e,t){a=Math.min(a,e),o=Math.max(o,e),v.fillStyle=i,v.globalAlpha=1,v.fillRect(0,0,d,s),v.fillStyle=l,v.fillText(f(e)+\" \"+n+\" (\"+f(a)+\"-\"+f(o)+\")\",c,p),v.drawImage(y,u+r,s,m-r,h,u,s,m-r,h),v.fillRect(u+m-r,s,r,h),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(u+m-r,s,r,f((1-e/t)*h))}}},c});\n","module.exports = (__webpack_require__(1))(2);","import * as THREE from 'three'\r\n\r\nvar scene;\r\n\r\nfunction initScene(){\r\n    scene = new THREE.Scene();\r\n}\r\n\r\nexport {scene, initScene}","import * as THREE from 'three'\r\nimport {scene} from './initScene.js'\r\n\r\nclass Maze{\r\n    // 製作一個M X N的迷宮，每個寬度為width，牆壁厚度為thickness，其高度為wallHeight\r\n    constructor(m,n,width,thickness,wallHeight){\r\n        this.m = m;\r\n        this.n = n;\r\n        this.width = width;\r\n        this.thickness = thickness;\r\n        this.wallHeight = wallHeight;\r\n        this.row = [];\r\n        this.col = [];\r\n        this.wall = [];\r\n        this.graph = [];\r\n\r\n        this.initMaze(m,n,width,thickness,wallHeight);\r\n    }\r\n\r\n    initMaze(m,n,width,thickness,wallHeight){\r\n        this.initData(m,n);\r\n\r\n        let loader = new THREE.TextureLoader();\r\n        loader.crossOrigin = '';\r\n        let textureOutX = loader.load('./texture/wall/1000-1000-2.jpg');\r\n        let textureOutY = loader.load('./texture/wall/1000-1000-2.jpg');\r\n        let textureOutZ = loader.load('./texture/wall/1000-1000-2.jpg');\r\n        let textureInZ = loader.load('./texture/wall/1000-1000-2.jpg');\r\n        let textureInY = loader.load('./texture/wall/1000-1000-2.jpg');\r\n\r\n        textureOutX.wrapS = textureOutX.wrapT = textureOutY.wrapS = textureOutY.wrapT = textureOutZ.wrapS = textureOutZ.wrapT = THREE.RepeatWrapping;\r\n        textureOutX.repeat.set(thickness / wallHeight, 1);\r\n        textureOutY.repeat.set(n, 50 / 1000);\r\n        textureOutZ.repeat.set(n, 1);\r\n\r\n        textureInY.repeat.set(1,50 / 1000);\r\n\r\n        let matArrayOut = [];\r\n        matArrayOut.push(new THREE.MeshPhongMaterial({map: textureOutX}),\r\n            new THREE.MeshPhongMaterial({map: textureOutX}),\r\n            new THREE.MeshPhongMaterial({map: textureOutY}),\r\n            new THREE.MeshPhongMaterial({map: textureOutY}),\r\n            new THREE.MeshPhongMaterial({map: textureOutZ}),\r\n            new THREE.MeshPhongMaterial({map: textureOutZ})\r\n        );\r\n\r\n        let matArrayIn = [];\r\n        matArrayIn.push(new THREE.MeshPhongMaterial({map: textureOutX}),\r\n            new THREE.MeshPhongMaterial({map: textureOutX}),\r\n            new THREE.MeshPhongMaterial({map: textureInY}),\r\n            new THREE.MeshPhongMaterial({map: textureInY}),\r\n            new THREE.MeshPhongMaterial({map: textureInZ}),\r\n            new THREE.MeshPhongMaterial({map: textureInZ})\r\n        );\r\n\r\n        var topWall = new THREE.Mesh(new THREE.BoxGeometry(n * width,wallHeight,thickness),matArrayOut);\r\n        var bottomWall = new THREE.Mesh(new THREE.BoxGeometry(n * width,wallHeight,thickness),matArrayOut);\r\n        var leftWall = new THREE.Mesh(new THREE.BoxGeometry(n * width,wallHeight,thickness),matArrayOut);\r\n        var rightWall = new THREE.Mesh(new THREE.BoxGeometry(n * width,wallHeight,thickness),matArrayOut);\r\n        \r\n        leftWall.rotation.y = rightWall.rotation.y = Math.PI / 2;\r\n\r\n        topWall.position.set(n * width / 2,wallHeight / 2,0);\r\n        bottomWall.position.set(n * width / 2,wallHeight / 2,m * width);\r\n        leftWall.position.set(0,wallHeight / 2,m * width / 2);\r\n        rightWall.position.set(n * width, wallHeight / 2, m * width / 2);\r\n\r\n        scene.add(topWall,bottomWall,leftWall,rightWall);\r\n        this.wall.push(topWall,bottomWall,leftWall,rightWall);\r\n\r\n        var i;\r\n        /*init Graph use adjency list*/\r\n        \r\n        for(i = 0; i < m * n; i++){\r\n            var temp = new Array(4);\r\n            temp.fill(null);\r\n\r\n            if(i - n >= 0) // top\r\n                temp[0] = i - n;\r\n            if(i % n !== 0) // left\r\n                temp[1] = i - 1;\r\n            if(i + n < m * n) // bottom\r\n                temp[2] = i + n; \r\n            if((i + 1) % n !== 0) // right\r\n                temp[3] = i + 1;\r\n            \r\n            this.graph.push(temp);\r\n        }\r\n        \r\n        ///////////row/////////////\r\n        for (i = 0; i < this.row.length; i++) {\r\n            let wallclone = new THREE.Mesh(new THREE.BoxGeometry(width, wallHeight, thickness), matArrayIn);\r\n            wallclone.position.x = (this.row[i][1]) * width;\r\n            wallclone.position.z = this.row[i][0] * width + (width / 2);\r\n            wallclone.position.y = wallHeight / 2;\r\n            wallclone.rotation.y = Math.PI / 2;\r\n\r\n            // update graph\r\n            let left = (this.row[i][1] - 1) + n * this.row[i][0];\r\n            let right = this.row[i][1] + n * this.row[i][0];\r\n\r\n            wallclone.mazeData = {\r\n                isRow: true,\r\n                frontPoint: left,\r\n                nextPoint: right\r\n            }\r\n\r\n            this.wall.push(wallclone);\r\n            scene.add(wallclone);\r\n\r\n            this.graph[left][this.graph[left].indexOf(right)] = null;\r\n            this.graph[right][this.graph[right].indexOf(left)] = null;\r\n        }\r\n        ////////////////col/////////////////////  \r\n        for (i = 0; i < this.col.length; i++) {\r\n            let wallclone = new THREE.Mesh(new THREE.BoxGeometry(width, wallHeight, thickness), matArrayIn);\r\n            wallclone.position.z = (this.col[i][1]) * width;\r\n            wallclone.position.x = this.col[i][0] * width + (width / 2);\r\n            wallclone.position.y = wallHeight / 2;\r\n            //wallclone.rotation.y = Math.PI/2;\r\n\r\n            // update graph\r\n            let top = (this.col[i][1] - 1) * n + this.col[i][0];\r\n            let bottom = this.col[i][1] * n + this.col[i][0];\r\n\r\n            wallclone.mazeData = {\r\n                isRow: false,\r\n                frontPoint: top,\r\n                nextPoint: bottom\r\n            }\r\n\r\n            this.wall.push(wallclone);\r\n            scene.add(wallclone);\r\n\r\n            this.graph[top][this.graph[top].indexOf(bottom)] = null;\r\n            this.graph[bottom][this.graph[bottom].indexOf(top)] = null;\r\n        }\r\n\r\n        this.wall.forEach(function(e){\r\n            e.traverse(function(t){\r\n                if(t instanceof THREE.Mesh)\r\n                    t.castShadow = t.receiveShadow = true;\r\n            })\r\n        });\r\n    }\r\n\r\n    // use kruskal's algorithm\r\n    initData(m,n){\r\n        var sets = [];\r\n        var walls = [];\r\n\r\n        for(let i = 0; i < m * n; i++)\r\n            sets.push(i);\r\n        \r\n        for(let i = 0; i < m; i++){\r\n            for(let j = 1; j < n; j++){\r\n                walls.push([0,i,j]);\r\n            }\r\n        }\r\n\r\n        for(let i = 0; i < n; i++){\r\n            for(let j = 1; j < m; j++){\r\n                walls.push([1,i,j]);\r\n            }\r\n        }\r\n\r\n        while(walls.length > 75){\r\n            let choose = Math.floor((walls.length * Math.random()));\r\n            let a,b;\r\n\r\n            //console.log('walls length: ' + walls.length);\r\n            //console.log('choose:' + choose);\r\n            if(walls[choose][0] === 0){\r\n                a = walls[choose][1] * n + walls[choose][2] - 1;\r\n                b = walls[choose][1] * n + walls[choose][2];\r\n            }\r\n            else {\r\n                a = (walls[choose][2] - 1) * n + walls[choose][1];\r\n                b = walls[choose][2] * n + walls[choose][1];\r\n            }\r\n\r\n            if(sets[a] === -1 || sets[b] === -1 || !Union_set(a,b)){\r\n                if(walls[choose][0] === 0)\r\n                    this.row.push([walls[choose][1],walls[choose][2]]);\r\n                else\r\n                    this.col.push([walls[choose][1],walls[choose][2]]);\r\n            }\r\n            \r\n            let temp = walls[choose];\r\n            walls[choose] = walls[walls.length - 1];\r\n            walls[walls.length - 1] = temp;\r\n\r\n            walls.pop();\r\n        }\r\n\r\n\r\n        function Union_set(x,y){\r\n            var a = find(x);\r\n            var b = find(y);\r\n\r\n            if(a !== b){\r\n                sets[b] = a;\r\n                return true;\r\n            }\r\n            else return false;\r\n        }\r\n\r\n        function find(n){\r\n            if(n == sets[n])\r\n                return n;\r\n            return sets[n] = find(sets[n]);\r\n        }\r\n    }\r\n\r\n\r\n    /*\r\n        data = {isRow, frontPoint, nextPoint}\r\n    */\r\n    removeWall(data){       //還沒做出row,col的刪除，pickable的刪除狀況，\r\n        let a = data.frontPoint;\r\n        let b = data.nextPoint;\r\n\r\n        \r\n        let x = Math.floor(a / this.n);\r\n        let y = a % this.n + 1;\r\n\r\n        if(b - a === 1){\r\n            let i;\r\n            for(i = 0; i < this.row.length; i++)\r\n                if(this.row[i][0] === x && this.row[i][1] === y)\r\n                    break;\r\n            this.row.splice(i,1);\r\n        }\r\n        else {\r\n            let i;\r\n            for(i = 0; i < this.col.length; i++)\r\n                if(this.col[i][0] === x && this.col[i][1] === y)\r\n                    break;\r\n            this.col.splice(i,1);\r\n        }\r\n\r\n        this.pushInGraph(a,b);\r\n        this.pushInGraph(b,a);\r\n        \r\n        \r\n        return;\r\n        var start = a;\r\n\r\n        var path = [];\r\n        for(let i = 0; i < 4; i++){\r\n            if(this.graph[a][i] !== null){\r\n                let x = DFS(this.graph,a,this.graph[a][i]);\r\n                if(x !== -1){\r\n                    path.push(x);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        let choose = Math.floor((path.length * Math.random()));\r\n        if(choose + 1 === path.length){\r\n            a = path[choose];\r\n            b = path[0];\r\n        }\r\n        else {\r\n            a = path[choose];\r\n            b = path[choose + 1];\r\n        }\r\n\r\n        if(a > b){\r\n            let temp = a;\r\n            a = b;\r\n            b = temp;\r\n        }\r\n\r\n        this.graph[a][this.graph[a].indexOf(b)] = null;\r\n        this.graph[b][this.graph[b].indexOf(a)] = null;\r\n        \r\n        let wallclone = new THREE.Mesh(new THREE.BoxGeometry(this.width, this.wallHeight, this.thickness), new THREE.MeshNormalMaterial());\r\n\r\n        if(b - a === 1){      //add row\r\n            let x = Math.floor(a / this.n);\r\n            let y = a % this.n + 1;\r\n            \r\n\r\n            this.row.push([x,y]);\r\n            \r\n            wallclone.position.x = y * this.width;\r\n            wallclone.position.z = x * this.width + (this.width / 2);\r\n            wallclone.position.y = this.wallHeight / 2;\r\n            wallclone.rotation.y = Math.PI / 2;\r\n\r\n            wallclone.mazeData = {\r\n                isRow: true,\r\n                frontPoint: a,\r\n                nextPoint: b\r\n            }\r\n        }\r\n        else {          //add col\r\n            let x = a % this.n;\r\n            let y = Math.floor(a / this.n) + 1;\r\n\r\n            this.col.push([x,y]);\r\n\r\n            wallclone.position.z = y * this.width;\r\n            wallclone.position.x = x * this.width + (this.width / 2);\r\n            wallclone.position.y = this.wallHeight / 2;\r\n\r\n            wallclone.mazeData = {\r\n                isRow: false,\r\n                frontPoint: a,\r\n                nextPoint: b\r\n            }\r\n        }\r\n        \r\n        scene.add(wallclone);\r\n        this.wall.push(wallclone);\r\n\r\n        function DFS(data,front,now){\r\n            console.log(now);\r\n            if(now === start)return now;\r\n            else {\r\n                for(let i = 0; i < 4; i++){\r\n                    if(data[now][i] !== null && data[now][i] !== front){\r\n                        var x = DFS(data,now,data[now][i]);\r\n\r\n                        if(x !== -1){\r\n                            path.push(x);\r\n                            return now;\r\n                        }\r\n                    }\r\n                }\r\n                return -1;\r\n            }\r\n        }\r\n    }\r\n\r\n    check(a,b){\r\n        if(this.graph[a].indexOf(b) < 0)\r\n            return false;\r\n        return true;\r\n    }\r\n\r\n    getNodeToPos(n){\r\n        let x = (n % this.n * this.width) + this.width / 2;\r\n        let z = (Math.floor(n / this.n) * this.width) + this.width / 2;\r\n        \r\n        return new THREE.Vector3(x,0,z);\r\n    }\r\n\r\n    pushInGraph(a,b){\r\n        if(a - this.n === b)\r\n            this.graph[a][0] = b;\r\n        else if(a - 1 === b)\r\n            this.graph[a][1] = b;\r\n        else if(a + this.n === b)\r\n            this.graph[a][2] = b;\r\n        else if(a + 1 === b)\r\n            this.graph[a][3] = b;\r\n        else console.log(\"pushInGraph function Error!!!\");\r\n    }\r\n}\r\n\r\nexport {Maze}","/**\r\n * @author Lee Stemkoski\r\n *\r\n * Usage:\r\n * (1) create a global variable:\r\n *      var keyboard = new KeyboardState();\r\n * (2) during main loop:\r\n *       keyboard.update();\r\n * (3) check state of keys:\r\n *       keyboard.down(\"A\")    -- true for one update cycle after key is pressed\r\n *       keyboard.pressed(\"A\") -- true as long as key is being pressed\r\n *       keyboard.up(\"A\")      -- true for one update cycle after key is released\r\n *\r\n *  See KeyboardState.k object data below for names of keys whose state can be polled\r\n */\r\n\r\n// initialization\r\nvar KeyboardState = function()\r\n{\r\n    // bind keyEvents\r\n    document.addEventListener(\"keydown\", KeyboardState.onKeyDown, false);\r\n    document.addEventListener(\"keyup\",   KeyboardState.onKeyUp,   false);\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////\r\n\r\nKeyboardState.k =\r\n    {\r\n        8: \"backspace\",  9: \"tab\",       13: \"enter\",    16: \"shift\",\r\n        17: \"ctrl\",     18: \"alt\",       27: \"esc\",      32: \"space\",\r\n        33: \"pageup\",   34: \"pagedown\",  35: \"end\",      36: \"home\",\r\n        37: \"left\",     38: \"up\",        39: \"right\",    40: \"down\",\r\n        45: \"insert\",   46: \"delete\",   186: \";\",       187: \"=\",\r\n        188: \",\",      189: \"-\",        190: \".\",       191: \"/\",\r\n        219: \"[\",      220: \"\\\\\",       221: \"]\",       222: \"'\"\r\n    }\r\n\r\nKeyboardState.status = {};\r\n\r\nKeyboardState.keyName = function ( keyCode )\r\n{\r\n    return ( KeyboardState.k[keyCode] != null ) ?\r\n        KeyboardState.k[keyCode] :\r\n        String.fromCharCode(keyCode);\r\n}\r\n\r\nKeyboardState.onKeyUp = function(event)\r\n{\r\n    event.preventDefault();\r\n    var key = KeyboardState.keyName(event.keyCode);\r\n    if ( KeyboardState.status[key] )\r\n        KeyboardState.status[key].pressed = false;\r\n}\r\n\r\nKeyboardState.onKeyDown = function(event)\r\n{\r\n    event.preventDefault();\r\n    var key = KeyboardState.keyName(event.keyCode);\r\n    if ( !KeyboardState.status[key] )\r\n        KeyboardState.status[key] = { down: false, pressed: false, up: false, updatedPreviously: false };\r\n}\r\n\r\nKeyboardState.prototype.update = function()\r\n{\r\n    for (var key in KeyboardState.status)\r\n    {\r\n        // insure that every keypress has \"down\" status exactly once\r\n        if ( !KeyboardState.status[key].updatedPreviously )\r\n        {\r\n            KeyboardState.status[key].down        \t\t= true;\r\n            KeyboardState.status[key].pressed     \t\t= true;\r\n            KeyboardState.status[key].updatedPreviously = true;\r\n        }\r\n        else // updated previously\r\n        {\r\n            KeyboardState.status[key].down = false;\r\n        }\r\n\r\n        // key has been flagged as \"up\" since last update\r\n        if ( KeyboardState.status[key].up )\r\n        {\r\n            delete KeyboardState.status[key];\r\n            continue; // move on to next key\r\n        }\r\n\r\n        if ( !KeyboardState.status[key].pressed ) // key released\r\n            KeyboardState.status[key].up = true;\r\n    }\r\n}\r\n\r\nKeyboardState.prototype.down = function(keyName)\r\n{\r\n    return (KeyboardState.status[keyName] && KeyboardState.status[keyName].down);\r\n}\r\n\r\nKeyboardState.prototype.pressed = function(keyName)\r\n{\r\n    return (KeyboardState.status[keyName] && KeyboardState.status[keyName].pressed);\r\n}\r\n\r\nKeyboardState.prototype.up = function(keyName)\r\n{\r\n    return (KeyboardState.status[keyName] && KeyboardState.status[keyName].up);\r\n}\r\n\r\nKeyboardState.prototype.debug = function()\r\n{\r\n    var list = \"Keys active: \";\r\n    for (var arg in KeyboardState.status)\r\n        list += \" \" + arg\r\n    console.log(list);\r\n}\r\n\r\nexport default KeyboardState\r\n\r\n///////////////////////////////////////////////////////////////////////////////","import * as THREE from 'three'\r\nvar THREE_Text = /******/ function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p=\"\",e(0)}([function(t,e,i){\"use strict\";var s=i(1);e.SpriteText2D=s.SpriteText2D;var n=i(6);e.MeshText2D=n.MeshText2D;var r=i(4);e.textAlign=r.textAlign},function(t,e,i){\"use strict\";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=i(2),r=i(3),h=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.raycast=function(){return this.sprite.raycast.apply(this.sprite,arguments)},e.prototype.updateText=function(){this.canvas.drawText(this._text,{font:this._font,fillStyle:this._fillStyle}),this.cleanUp(),this.texture=new n.Texture(this.canvas.canvas),this.texture.needsUpdate=!0,this.applyAntiAlias(),this.material?this.material.map=this.texture:this.material=new n.SpriteMaterial({map:this.texture}),this.sprite||(this.sprite=new n.Sprite(this.material),this.geometry=this.sprite.geometry,this.add(this.sprite)),this.sprite.scale.set(this.canvas.width,this.canvas.height,1),this.sprite.position.x=this.canvas.width/2-this.canvas.textWidth/2+this.canvas.textWidth/2*this.align.x,this.sprite.position.y=-this.canvas.height/2+this.canvas.textHeight/2*this.align.y},e}(r.Text2D);e.SpriteText2D=h},function(t,e){t.exports=THREE},function(t,e,i){\"use strict\";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=i(2),r=i(4),h=i(5),a=function(t){function e(e,i){void 0===e&&(e=\"\"),void 0===i&&(i={}),t.call(this),this._font=i.font||\"30px Arial\",this._fillStyle=i.fillStyle||\"#FFFFFF\",this.canvas=new h.CanvasText,this.align=i.align||r.textAlign.center,this.side=i.side||n.DoubleSide,this.antialias=\"undefined\"==typeof i.antialias||i.antialias,this.text=e}return s(e,t),Object.defineProperty(e.prototype,\"width\",{get:function(){return this.canvas.textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"height\",{get:function(){return this.canvas.textHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"text\",{get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this.updateText())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"font\",{get:function(){return this._font},set:function(t){this._font!==t&&(this._font=t,this.updateText())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"fillStyle\",{get:function(){return this._fillStyle},set:function(t){this._fillStyle!==t&&(this._fillStyle=t,this.updateText())},enumerable:!0,configurable:!0}),e.prototype.cleanUp=function(){this.texture&&this.texture.dispose()},e.prototype.applyAntiAlias=function(){this.antialias===!1&&(this.texture.magFilter=n.NearestFilter,this.texture.minFilter=n.LinearMipMapLinearFilter)},e}(n.Object3D);e.Text2D=a},function(t,e,i){\"use strict\";function s(t){var e=r[t];if(!e){var i=document.getElementsByTagName(\"body\")[0],s=document.createElement(\"div\"),n=document.createTextNode(\"MEq\");s.appendChild(n),s.setAttribute(\"style\",\"font:\"+t+\";position:absolute;top:0;left:0\"),i.appendChild(s),e=s.offsetHeight,r[t]=e,i.removeChild(s)}return e}var n=i(2);e.textAlign={center:new n.Vector2(0,0),left:new n.Vector2(1,0),topLeft:new n.Vector2(1,(-1)),topRight:new n.Vector2((-1),(-1)),right:new n.Vector2((-1),0),bottomLeft:new n.Vector2(1,1),bottomRight:new n.Vector2((-1),1)};var r={};e.getFontHeight=s},function(t,e,i){\"use strict\";var s=i(2),n=i(4),r=function(){function t(){this.textWidth=null,this.textHeight=null,this.canvas=document.createElement(\"canvas\"),this.ctx=this.canvas.getContext(\"2d\")}return Object.defineProperty(t.prototype,\"width\",{get:function(){return this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"height\",{get:function(){return this.canvas.height},enumerable:!0,configurable:!0}),t.prototype.drawText=function(t,e){return this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font=e.font,this.textWidth=Math.ceil(this.ctx.measureText(t).width),this.textHeight=n.getFontHeight(this.ctx.font),this.canvas.width=s.Math.ceilPowerOfTwo(this.textWidth),this.canvas.height=s.Math.ceilPowerOfTwo(this.textHeight),this.ctx.font=e.font,this.ctx.fillStyle=e.fillStyle,this.ctx.textAlign=\"left\",this.ctx.textBaseline=\"top\",this.ctx.fillText(t,0,0),this.canvas},t}();e.CanvasText=r},function(t,e,i){\"use strict\";var s=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},n=i(2),r=i(3),h=function(t){function e(e,i){void 0===e&&(e=\"\"),void 0===i&&(i={}),t.call(this,e,i)}return s(e,t),e.prototype.raycast=function(){this.mesh.raycast.apply(this.mesh,arguments)},e.prototype.updateText=function(){this.cleanUp(),this.canvas.drawText(this._text,{font:this._font,fillStyle:this._fillStyle}),this.texture=new n.Texture(this.canvas.canvas),this.texture.needsUpdate=!0,this.applyAntiAlias(),this.material?this.material.map=this.texture:(this.material=new n.MeshBasicMaterial({map:this.texture,side:this.side}),this.material.transparent=!0),this.mesh||(this.geometry=new n.PlaneGeometry(this.canvas.width,this.canvas.height),this.mesh=new n.Mesh(this.geometry,this.material),this.add(this.mesh)),this.mesh.position.x=this.canvas.width/2-this.canvas.textWidth/2+this.canvas.textWidth/2*this.align.x,this.mesh.position.y=-this.canvas.height/2+this.canvas.textHeight/2*this.align.y,this.geometry.vertices[0].x=this.geometry.vertices[2].x=-this.canvas.width/2,this.geometry.vertices[1].x=this.geometry.vertices[3].x=this.canvas.width/2,this.geometry.vertices[0].y=this.geometry.vertices[1].y=this.canvas.height/2,this.geometry.vertices[2].y=this.geometry.vertices[3].y=-this.canvas.height/2,this.geometry.verticesNeedUpdate=!0},e}(r.Text2D);e.MeshText2D=h}]);\r\n\r\nexport default THREE_Text;","import {scene} from './initScene.js'\r\nimport * as THREE from 'three'\r\nimport THREE_Text from './text2D.js'\r\n\r\nclass Car{\r\n    constructor(maze,bodycolor,textName = null,startCell = 0,camera = null){\r\n        this.nowCell = startCell;\r\n        this.width = 10;\r\n        this.body = this.buildBody(bodycolor,textName);\r\n        this.maze = maze;\r\n        this.rot = 0;\r\n        this.speed = 0;\r\n\r\n        if(camera){\r\n            camera.position.set(-40,60,0);\r\n            camera.lookAt(this.body.position.clone().add(new THREE.Vector3(-5,90,0)).sub(camera.position));\r\n            this.body.add(camera);\r\n        }\r\n        \r\n        this.body.position.copy(this.maze.getNodeToPos(startCell));\r\n\r\n        scene.add(this.body);\r\n    }\r\n\r\n    buildBody(bodycolor,textName){\r\n        let body = new THREE.Object3D();\r\n        let a = new THREE.Mesh(new THREE.CylinderGeometry(this.width,this.width,10,64),new THREE.MeshPhongMaterial({color: new THREE.Color(bodycolor)}));\r\n        let b = new THREE.Mesh(new THREE.BoxGeometry(this.width * 2,10,6),new THREE.MeshPhongMaterial({color: new THREE.Color(bodycolor)}));\r\n        b.position.set(this.width,0,0);\r\n        a.add(b);\r\n        a.position.y = 5;\r\n\r\n        body.add(a);\r\n\r\n        if(textName !== null){\r\n            var text = new THREE_Text.SpriteText2D(\"  \" + textName,{\r\n                align: THREE_Text.textAlign.center,\r\n                font: '40px Arial',\r\n                fillStyle: '#000000',\r\n                antialias: true\r\n            });\r\n\r\n            text.position.set(0,60,0);\r\n            text.scale.set(0.5,0.5,0.5);\r\n            body.add(text);\r\n        }\r\n\r\n        body.traverse(function(e){\r\n            if(e instanceof THREE.Mesh)\r\n                e.castShadow = e.receiveShadow = true;\r\n        });\r\n\r\n        return body;\r\n    }\r\n\r\n    update(dt,keyboard){\r\n        keyboard.update();\r\n\r\n        if(keyboard.pressed('right')){\r\n            this.rot -= 0.03;\r\n        }\r\n        if(keyboard.pressed('left')){\r\n            this.rot += 0.03;\r\n        }\r\n        if(keyboard.pressed('up')){\r\n            this.speed += 0.2;\r\n        }\r\n        if(keyboard.pressed('down')){\r\n            this.speed -= 0.2;\r\n        }\r\n\r\n        let vel = new THREE.Vector3(this.speed, 0, 0);\r\n        vel.applyAxisAngle(new THREE.Vector3(0,1,0), this.rot);\r\n        \r\n        this.body.rotation.y = this.rot;\r\n        let nextPos = this.body.position.clone().add(vel.clone().multiplyScalar(dt));\r\n        if(this.checkNextPos(nextPos)){\r\n            this.body.position.add(vel.clone().multiplyScalar(dt));\r\n\r\n            let j = Math.floor(nextPos.x / this.maze.width);\r\n            let i = Math.floor(nextPos.z / this.maze.width);\r\n            this.nowCell = i * this.maze.n + j;\r\n        }\r\n        else this.speed /= 2;\r\n        \r\n    }\r\n\r\n    checkNextPos(nextPos){\r\n        let mazeWidth = this.maze.width * this.maze.n;\r\n        let mazeDepth = this.maze.width * this.maze.m;\r\n        if(nextPos.x >= 0 + this.width && nextPos.z >= 0 + this.width && nextPos.x <= mazeWidth - this.width && nextPos.z <= mazeDepth - this.width){\r\n            let dir = [[1,1],[-1,1],[1,-1],[-1,-1]];\r\n\r\n            for(let k = 0; k < 4; k++){\r\n                let j = Math.floor((nextPos.x + dir[k][0] * this.width) / this.maze.width);\r\n                let i = Math.floor((nextPos.z + dir[k][1] * this.width) / this.maze.width);\r\n\r\n                let nextCell = i * this.maze.n + j;\r\n                if(nextCell !== this.nowCell && !this.maze.check(nextCell,this.nowCell))\r\n                    return false;\r\n            }\r\n            \r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\nexport default Car;","import * as THREE from 'three'\r\n\r\nclass HUD{\r\n    constructor(target,mazeTotalWidth) {\r\n        this.initHUD(mazeTotalWidth);\r\n\r\n        //target.add(this.cameraHUD2);\r\n    }\r\n\r\n    initHUD(mazeTotalWidth){\r\n        mazeTotalWidth /= 2;\r\n        this.sceneHUD = new THREE.Scene();\r\n        this.cameraHUD1 = new THREE.OrthographicCamera(-10.1,10.1,10.1,-10.1,1,50);\r\n        this.cameraHUD2 = new THREE.OrthographicCamera(-mazeTotalWidth, mazeTotalWidth, mazeTotalWidth, -mazeTotalWidth, -350, 350);\r\n        this.cameraHUD2.position.set(mazeTotalWidth,15,mazeTotalWidth);\r\n        this.cameraHUD2.up.set(1,0,0);\r\n        this.cameraHUD2.lookAt(new THREE.Vector3(mazeTotalWidth,0,mazeTotalWidth));\r\n\r\n\r\n        var lineGeo = new THREE.Geometry();\r\n        lineGeo.vertices.push(\r\n            new THREE.Vector3(-10,-10,0),\r\n            new THREE.Vector3(10,-10,0),\r\n            new THREE.Vector3(10,10,0),\r\n            new THREE.Vector3(-10,10,0),\r\n            new THREE.Vector3(-10,-10,0),\r\n        );\r\n\r\n        var line = new THREE.Line(lineGeo, new THREE.LineBasicMaterial({color: 0xffffff}));\r\n        this.sceneHUD.add(line);\r\n    }\r\n}\r\n\r\nexport default HUD","import * as THREE from 'three'\r\nimport OrbitControls from 'three-orbitcontrols'\r\nimport {scene, initScene} from './initScene.js'\r\nimport {Maze} from './Maze.js'\r\nimport KeyboardState from './keyboard.js'\r\nimport Car from './Car.js'\r\nimport HUD from './HUD.js'\r\nimport NPC from './NPC.js'\r\nimport Stats from 'stats-js'\r\nimport THREE_Text from './text2D.js'\r\n\r\nvar camera, renderer, stats, clock, controls, maze, hud, stats = new Stats();\r\nvar raycaster = new THREE.Raycaster(), mouse = new THREE.Vector2(),pickables = [];\r\nvar car, npc, npc2,npc3,npc4;\r\nvar keyboard = new KeyboardState();\r\nvar mazeWidth = 50, mazeSize = 20, cameraFar = 300;\r\nvar light;\r\n\r\nwindow.addEventListener('resize', onWindowResize, false);\r\ndocument.addEventListener('mousedown',onMouseDown,false);\r\n\r\ninit();\r\nanimate();\r\n\r\nfunction init() {\r\n    initScene();\r\n    \r\n    stats.domElement.style.position = 'absolute';\r\n    stats.domElement.style.top = '0px';\r\n    stats.domElement.style.zIndex = 100;\r\n    document.body.appendChild(stats.domElement);\r\n\t\r\n    clock = new THREE.Clock();\r\n\r\n    camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 10, cameraFar);\r\n    scene.add(camera);\r\n\r\n    var gridXZ = new THREE.GridHelper(500, 10, 'red', 'white');\r\n    //scene.add(gridXZ);\r\n    gridXZ.position.set(250, 0, 250);\r\n    //gridXZ.rotation.x = Math.PI / 2;\r\n    scene.add(new THREE.AxisHelper(50));\r\n\r\n\r\n    renderer = new THREE.WebGLRenderer();\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n    renderer.setClearColor(0x888888);\r\n    renderer.autoClear = false;\r\n\r\n    //controls = new OrbitControls(camera, renderer.domElement);\r\n    //controls.enableKeys = false;\r\n\r\n    document.body.appendChild(renderer.domElement);\r\n\t\r\n    maze = new Maze(mazeSize,mazeSize,mazeWidth,5,mazeWidth);\r\n    \r\n    maze.wall.forEach(function(e){\r\n        pickables.push(e);\r\n    });\r\n\r\n    car = new Car(maze,'green',null,0,camera);\r\n    hud = new HUD(car.body,mazeWidth * mazeSize);\r\n    ////\r\n    let t = new THREE.Mesh(new THREE.CylinderGeometry(5,5,100,64), new THREE.MeshBasicMaterial({color: 0x0000ff}));\r\n    t.position.set(475,50,475);\r\n\r\n    scene.add(t);\r\n\r\n    let loader = new THREE.TextureLoader();\r\n    loader.crossOrigin = '';\r\n    loader.load(\r\n        './texture/road/418-418.jpg',\r\n        function(texture){\r\n            texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\r\n            texture.repeat.set(mazeSize,mazeSize);\r\n            let plane = new THREE.Mesh(new THREE.PlaneGeometry(mazeWidth * mazeSize,mazeWidth * mazeSize), new THREE.MeshPhongMaterial({map: texture}))\r\n            plane.rotation.x = -Math.PI / 2;\r\n            plane.position.set(mazeWidth * mazeSize / 2,0,mazeWidth * mazeSize / 2);\r\n\r\n            plane.receiveShadow = true;\r\n            scene.add(plane);\r\n        },undefined,function(xhr) {console.log('error loader texture');}\r\n    );\r\n\r\n    \r\n    ////\r\n\r\n    npc = new NPC(maze,'red','',5,0);\r\n    npc2 = new NPC(maze,'blue','',13,1);\r\n    \r\n\r\n    //scene.fog = new THREE.Fog(0xffffff,500,700);\r\n    scene.background = new THREE.Color( 0x222222 );\r\n    scene.fog = new THREE.Fog( 0x222222, cameraFar - 50, cameraFar );\r\n    \r\n    // light\r\n    light = new THREE.DirectionalLight(0xaaaaaa);\r\n    light.castShadow = true;\r\n    light.shadow.mapSize.width = light.shadow.mapSize.height = 1024;\r\n    light.shadow.camera.left = light.shadow.camera.top = - (mazeWidth * mazeSize / 2 + 150);\r\n    light.shadow.camera.right = light.shadow.camera.bottom = (mazeWidth * mazeSize / 2 + 150);\r\n    light.shadow.camera.near = 1;\r\n    light.shadow.camera.far = (mazeWidth * mazeSize / 2 + 150);\r\n    light.shadow.bias = -0.01;\r\n\r\n    //renderer.shadowMap.enabled = true;\r\n    //renderer.shadowMap.type = THREE.PCFShadowMap;\r\n\r\n    light.position.set((mazeWidth * mazeSize / 2 + 50),200,(mazeWidth * mazeSize / 2 + 50));\r\n    light.target.position.set((mazeWidth * mazeSize / 2),0,(mazeWidth * mazeSize / 2));\r\n    scene.add(light.target);\r\n    scene.add(light,new THREE.AmbientLight(0x888888));\r\n    //scene.add(new THREE.CameraHelper(light.shadow.camera));\r\n    // light end\r\n\r\n    document.getElementById('info').innerHTML = '迷宮為' + mazeSize + 'x' + mazeSize;\r\n\r\n    // BFS \r\n\r\n    npc3 = new NPC(maze,'orange','NPC3',0,3);\r\n    npc4 = new NPC(maze,'white','NPC3',0,4);\r\n    npc4.target = npc3.target = mazeSize * mazeSize - 1;\r\n    BFS_TEST(0);\r\n}\r\n\r\nfunction BFS_TEST(start_node){\r\n    let queue = [],sum = 0;\r\n    let isTraverse = new Array(maze.m * maze.n);\r\n    isTraverse.fill(false);\r\n\r\n    queue.push([start_node, 0]);\r\n    //isTraverse[start_node] = true;\r\n    while(queue.length > 0){\r\n        let now = queue.shift();\r\n\r\n        if(isTraverse[now[0]])continue;\r\n        isTraverse[now[0]] = true;\r\n        sum++;\r\n\r\n        if(now[0] == npc3.target){\r\n            document.getElementById(\"Dijkstra’s_Algorithm_hint\").innerHTML = 'Dijkstra’s Algorithm最短路徑長度為' + \r\n                now[1] + ' 參考cells數為(黑色): ' + sum;\r\n            return;\r\n        }\r\n\r\n        for(let i = 0; i < 4; i++){\r\n            if(maze.graph[now[0]][i] !== null && !isTraverse[maze.graph[now[0]][i]])\r\n                queue.push([maze.graph[now[0]][i], now[1] + 1]);\r\n        }\r\n        \r\n        let shit = new THREE.Mesh(new THREE.SphereGeometry(5,8,6), new THREE.MeshBasicMaterial({color: new THREE.Color('black')}));\r\n        shit.position.copy(maze.getNodeToPos(now[0]).add(new THREE.Vector3(10,0,0)));\r\n        scene.add(shit);\r\n    }\r\n}\r\n\r\nfunction onWindowResize() {\r\n    var width = window.innerWidth;\r\n    var height = window.innerHeight;\r\n    camera.aspect = width / height;\r\n    camera.updateProjectionMatrix();\r\n    renderer.setSize(width, height);\r\n}\r\n\r\nfunction animate() {\r\n    stats.update();\r\n    var dt = clock.getDelta();\r\n    car.update(dt,keyboard);\r\n    npc2.update(dt);\r\n    npc.update(dt);\r\n\r\n    npc3.update(dt);\r\n    npc4.update(dt);\r\n\r\n    requestAnimationFrame(animate);\r\n    render();\r\n}\r\n\r\nfunction render() {\r\n    var WW = window.innerWidth;\r\n    var HH = window.innerHeight;\r\n\r\n    //renderer.shadowMap.enabled = true;\r\n    renderer.setScissorTest(true);\r\n    renderer.setViewport(0, 0, WW * 0.5, HH);\r\n    renderer.setScissor(0, 0, WW * 0.5, HH);\r\n    renderer.clear();\r\n    renderer.render(scene,camera);\r\n\r\n    //renderer.shadowMap.enabled = false;\r\n    renderer.setViewport(WW * 0.5, 0, WW * 0.5, HH);\r\n    renderer.setScissor(WW * 0.5, 0, WW * 0.5, HH);\r\n    renderer.clear();\r\n    renderer.render(scene,hud.cameraHUD2);\r\n    renderer.render(hud.sceneHUD,hud.cameraHUD1);\r\n}\r\n\r\nfunction onMouseDown(e){\r\n    e.preventDefault();\r\n    mouse.x = (e.clientX / (window.innerWidth / 2)) * 2 - 1;\r\n    mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;\r\n\r\n    raycaster.setFromCamera(mouse, camera);\r\n    var intersects = raycaster.intersectObjects(pickables);\r\n    if(intersects.length > 0){\r\n        console.log(intersects[0]);\r\n        \r\n        if('mazeData' in intersects[0].object){\r\n            pickables.splice(pickables.indexOf(intersects[0].object),1);\r\n            scene.remove(intersects[0].object);\r\n            maze.removeWall(intersects[0].object.mazeData);\r\n        }\r\n        \r\n    }\r\n\r\n}","import * as THREE from 'three'\r\nimport {scene} from './initScene.js'\r\nimport Car from './Car.js'\r\n\r\n\r\n// 注意，使用A star時 this.target要從主程式設定\r\nclass NPC extends Car{\r\n    constructor(maze,bodycolor,textName ,startCell = 0, traversMode = 0,camera = null){\r\n        super(maze,bodycolor,textName,startCell,camera);\r\n        \r\n        this.bodycolor = bodycolor;\r\n        this.NPCStateTable = Object.freeze({\"initState\" : 1,\"findNextPoint\" : 2,\"GoToPoint\" : 3});\r\n        this.NPCState = this.NPCStateTable.initState;\r\n        this.isTraverse = new Array(maze.m * maze.n);   // use to random DFS\r\n        this.targetNode = new THREE.Vector3();\r\n        this.target = 0;\r\n        this.stackPath = [];        // use to random DFS\r\n        this.frontNode = -1;        // use to left traverse\r\n        this.speed = 180;\r\n        this.traversMode = traversMode;\r\n        this.traversModeTable = Object.freeze({\"left\": 0,\"right\": 1,\"random\": 2,\"Astar_Manhattan\": 3,\"Astar_Euclidean\":4});\r\n        this.AstarPath = [];\r\n    }\r\n\r\n    // use random DFS, it can't use to dynamic maze, except init all traversal\r\n    findNextPoint_Random(){\r\n        this.isTraverse[this.nowCell] = true;\r\n\r\n        let node, find = false;\r\n        for(let i = 0; i < this.maze.graph[this.nowCell].length; i++){\r\n            if(this.maze.graph[this.nowCell][i] !== null && !this.isTraverse[this.maze.graph[this.nowCell][i]]){\r\n                this.stackPath.push(this.nowCell);\r\n                node = this.maze.graph[this.nowCell][i];\r\n                find = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(!find && this.stackPath.length == 0){\r\n            return false;\r\n        }\r\n        else if(!find){\r\n            node = this.stackPath[this.stackPath.length - 1]\r\n            this.stackPath.pop();\r\n        }\r\n\r\n        this.target = node;\r\n        this.targetNode.copy(this.maze.getNodeToPos(node));\r\n\r\n        return true;\r\n    }\r\n\r\n    // use Left, it can use to dynamic maze\r\n    findNextPoint_Left(){\r\n        let node;\r\n        \r\n        node = (this.maze.graph[this.nowCell].indexOf(this.frontNode) + 3) % 4;\r\n        for(let i = 0; i < 4; i++, node = (node + 3) % 4){\r\n            if(this.maze.graph[this.nowCell][node] !== null)\r\n                break;\r\n        }\r\n        \r\n        this.frontNode = this.nowCell;\r\n        this.target = this.maze.graph[this.nowCell][node];\r\n        this.targetNode.copy(this.maze.getNodeToPos(this.target));\r\n\r\n\r\n        return true;\r\n    }\r\n\r\n    findNextPoint_Right(){\r\n        let node;\r\n        \r\n        node = (this.maze.graph[this.nowCell].indexOf(this.frontNode) + 1) % 4;\r\n        for(let i = 0; i < 4; i++, node = (node + 1) % 4){\r\n            if(this.maze.graph[this.nowCell][node] !== null)\r\n                break;\r\n        }\r\n        \r\n        this.frontNode = this.nowCell;\r\n        this.target = this.maze.graph[this.nowCell][node];\r\n        this.targetNode.copy(this.maze.getNodeToPos(this.target));\r\n\r\n\r\n        return true;\r\n    }\r\n\r\n    GoToPoint(dt){\r\n        let vel = this.targetNode.clone().sub(this.body.position).normalize().multiplyScalar(dt * this.speed);\r\n        \r\n        this.body.position.add(vel);\r\n\r\n        this.body.rotation.y = Math.acos(vel.x / vel.length());\r\n        if(vel.z > 0)\r\n            this.body.rotation.y *= -1;\r\n\r\n        if(this.targetNode.clone().sub(this.body.position).length() < 10){\r\n            this.nowCell = this.target;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    initAstarPath_Manhattan(shitDis,colorString){\r\n        let openList = [];\r\n        let closeList = [];\r\n        let sumNode = 0;\r\n        openList.push({NodeName: 0, NodeValue: 0, Parent: -1});\r\n        while(openList.length > 0){\r\n            let n = openList[0];\r\n            let pos = 0;\r\n            for(let i = 1; i < openList.length; i++){\r\n                if(n.NodeValue > openList[i].NodeValue){\r\n                    n = openList[i];\r\n                    pos = i;\r\n                }\r\n            }\r\n            openList.splice(pos,1);\r\n\r\n            closeList.push(n);\r\n\r\n            if(n.NodeName === this.target){\r\n                let now = this.target;\r\n\r\n                for(let i = closeList.length - 1; i >= 0;){\r\n                    while(i >= 0 && closeList[i].NodeName !== now)i--;\r\n                    if(now === this.nowCell)break;\r\n\r\n                    this.AstarPath.push(now);\r\n                    now = closeList[i].Parent;\r\n                }\r\n                document.getElementById('Manhattan_hint').innerHTML += 'Manhattan heuristic function路徑長度為(橙色)' + this.AstarPath.length +\r\n                                        ' 參考cell數為(粉色): ' + sumNode;\r\n                return;\r\n            }\r\n\r\n            for(let i = 0; i < 4; i++){\r\n                if(this.maze.graph[n.NodeName][i] !== null){\r\n                    let dis = this.maze.getNodeToPos(this.maze.graph[n.NodeName][i]).sub(this.maze.getNodeToPos(0)).length();\r\n                    let ref = Math.abs(Math.floor(this.target / this.maze.n) - Math.floor(this.maze.graph[n.NodeName][i] / this.maze.n)) + Math.abs(this.target % this.maze.n - this.maze.graph[n.NodeName][i] % this.maze.n);\r\n                    ref *= this.maze.width;\r\n\r\n                    let find = false;\r\n                    for(let j = 0; j < openList.length; j++){\r\n                        if(openList[j].NodeName === this.maze.graph[n.NodeName][i]){\r\n                            find = true;\r\n                            openList[j].NodeValue = openList[j].NodeValue > dis + ref ? dis + ref : openList[j].NodeValue;\r\n                        }\r\n                    }\r\n                    for(let j = 0; j < closeList.length; j++){\r\n                        if(closeList[j].NodeName === this.maze.graph[n.NodeName][i])\r\n                            find = true;\r\n                    }\r\n\r\n                    if(!find){\r\n                        let temp = {NodeName: this.maze.graph[n.NodeName][i], NodeValue: dis + ref, Parent: n.NodeName};\r\n                        openList.push(temp);\r\n\r\n                        this.drawColor(temp.NodeName,shitDis,colorString);\r\n                        sumNode++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    initAstarPath_Euclidean(shitDis,colorString){\r\n        let openList = [];\r\n        let closeList = [];\r\n        let sumNode = 0;\r\n        openList.push({NodeName: 0, NodeValue: 0, Parent: -1});\r\n        while(openList.length > 0){\r\n            let n = openList[0];\r\n            let pos = 0;\r\n            for(let i = 1; i < openList.length; i++){\r\n                if(n.NodeValue > openList[i].NodeValue){\r\n                    n = openList[i];\r\n                    pos = i;\r\n                }\r\n            }\r\n            openList.splice(pos,1);\r\n\r\n            closeList.push(n);\r\n\r\n            if(n.NodeName === this.target){\r\n                let now = this.target;\r\n\r\n                for(let i = closeList.length - 1; i >= 0;){\r\n                    while(i >= 0 && closeList[i].NodeName !== now)i--;\r\n                    if(now === this.nowCell)break;\r\n\r\n                    this.AstarPath.push(now);\r\n                    now = closeList[i].Parent;\r\n                }\r\n                document.getElementById('Euclidean_hint').innerHTML = 'Euclidean heuristic function路徑長度為(白色)' + this.AstarPath.length +\r\n                                        ' 參考cell數為(紫色): ' + sumNode;\r\n                return;\r\n            }\r\n\r\n            for(let i = 0; i < 4; i++){\r\n                if(this.maze.graph[n.NodeName][i] !== null){\r\n                    let dis = this.maze.getNodeToPos(0).sub(this.maze.getNodeToPos(this.maze.graph[n.NodeName][i])).length();\r\n                    let ref = this.maze.getNodeToPos(this.maze.graph[n.NodeName][i]).sub(this.maze.getNodeToPos(this.target)).length();\r\n                    //let ref = Math.abs(Math.floor(this.target / this.maze.n) - Math.floor(this.maze.graph[n.NodeName][i] / this.maze.n)) + Math.abs(this.target % this.maze.n - this.maze.graph[n.NodeName][i] % this.maze.n);\r\n                    //ref *= this.maze.width;\r\n\r\n                    let find = false;\r\n                    for(let j = 0; j < openList.length; j++){\r\n                        if(openList[j].NodeName === this.maze.graph[n.NodeName][i]){\r\n                            find = true;\r\n                            openList[j].NodeValue = openList[j].NodeValue > dis + ref ? dis + ref : openList[j].NodeValue;\r\n                        }\r\n                    }\r\n                    for(let j = 0; j < closeList.length; j++){\r\n                        if(closeList[j].NodeName === this.maze.graph[n.NodeName][i])\r\n                            find = true;\r\n                    }\r\n\r\n                    if(!find){\r\n                        let temp = {NodeName: this.maze.graph[n.NodeName][i], NodeValue: dis + ref, Parent: n.NodeName};\r\n                        openList.push(temp);\r\n\r\n                        this.drawColor(temp.NodeName,shitDis,colorString);\r\n                        sumNode++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    drawColor(node,dis,colorString){\r\n        let shit = new THREE.Mesh(new THREE.SphereGeometry(5,8,6), new THREE.MeshBasicMaterial({color: new THREE.Color(colorString)}));\r\n        shit.position.copy(this.maze.getNodeToPos(node).add(new THREE.Vector3(0,0,dis)));\r\n        scene.add(shit);\r\n    }\r\n\r\n    findNextPoint_Astar(){\r\n        if(this.AstarPath.length === 0)return false;\r\n        this.target = this.AstarPath.pop();\r\n        this.targetNode.copy(this.maze.getNodeToPos(this.target));\r\n        \r\n        let shit = new THREE.Mesh(new THREE.SphereGeometry(5,8,6), new THREE.MeshBasicMaterial({color: new THREE.Color(this.bodycolor)}));\r\n        shit.position.copy(this.targetNode);\r\n        scene.add(shit);\r\n        \r\n        return true;\r\n    }\r\n\r\n    update(dt){\r\n        let res;\r\n        switch (this.NPCState) {\r\n            case this.NPCStateTable.initState:\r\n                switch(this.traversMode){\r\n                    case this.traversModeTable.Astar_Manhattan:\r\n                        this.initAstarPath_Manhattan(10,'pink');\r\n                    break;\r\n                    case this.traversModeTable.Astar_Euclidean:\r\n                        this.initAstarPath_Euclidean(-10,'purple');\r\n                    break;\r\n                    default:\r\n                        this.isTraverse.fill(false);\r\n                        this.isTraverse[this.nowCell] = true;   \r\n                    break;\r\n                }\r\n                this.NPCState = this.NPCStateTable.findNextPoint;\r\n            case this.NPCStateTable.findNextPoint:\r\n                switch(this.traversMode){\r\n                    case this.traversModeTable.left:\r\n                        res = this.findNextPoint_Left();\r\n                    break;\r\n                    case this.traversModeTable.right:\r\n                        res = this.findNextPoint_Right();\r\n                    break;\r\n                    case this.traversModeTable.Astar_Manhattan:\r\n                    case this.traversModeTable.Astar_Euclidean:\r\n                        res = this.findNextPoint_Astar();\r\n                    break;\r\n                }\r\n                if(res)\r\n                    this.NPCState = this.NPCStateTable.GoToPoint;\r\n                else {\r\n                    if(this.traversMode == this.traversModeTable.Astar_Euclidean || this.traversMode == this.traversModeTable.Astar_Manhattan);\r\n                    else this.NPCState = this.NPCStateTable.initState;\r\n                    break;\r\n                }\r\n                    \r\n            case this.NPCStateTable.GoToPoint:\r\n                res = this.GoToPoint(dt);\r\n                if(res)\r\n                    this.NPCState = this.NPCStateTable.findNextPoint;\r\n            break;\r\n        }\r\n    }\r\n}\r\n\r\nexport default NPC"],"sourceRoot":""}